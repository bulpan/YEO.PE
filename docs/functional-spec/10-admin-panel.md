# 어드민 패널 기능 명세서 (Admin Panel Functional Specification)

> **프로젝트**: YEO.PE
> **버전**: 1.0
> **상태**: 초안 (Draft)

## 1. 개요 (Overview)

어드민 패널은 YEO.PE 서비스의 운영자 및 개발자가 시스템 상태를 모니터링하고 관리하기 위한 웹 기반 대시보드입니다. 서비스의 특성상 휘발성 데이터가 많아 디버깅 및 모니터링이 어렵다는 점을 보완하기 위해, 실시간 통계, 채팅방 상태, 사용자 활동 등을 시각적으로 제공합니다.

## 2. 접근 제어 (Access Control)

- **인증 방식**: 별도의 관리자 로그인 페이지 (일반 앱 사용자와 분리).
- **보안**:
    - 초기 MVP: 환경 변수에 설정된 관리자 비밀번호 사용.
    - 세션 관리: 별도의 관리자용 JWT 토큰 사용.
    - (선택 사항) 특정 IP 대역에서만 접근 허용.

## 3. 주요 기능 (Key Features)

### 3.1 대시보드 (Dashboard)
시스템의 현재 상태를 한눈에 파악할 수 있는 메인 화면입니다.

- **실시간 지표 (Real-time Metrics)**:
    - **현재 접속자 수**: 소켓에 연결된 활성 클라이언트 수.
    - **활성 대화방 수**: 현재 운영 중인 방의 개수.
    - **일일 메시지 수**: 지난 24시간 동안 전송된 총 메시지 수.
    - **BLE 스캔 리포트**: 분당 수신되는 BLE 탐색 데이터 수.
- **차트/그래프**:
    - 시간대별 트래픽 추이 (최근 1시간/24시간).
    - 신규 방 생성 추이.

### 3.2 방 관리 (Room Management)
휘발성 채팅방을 조회하고 관리하는 기능입니다.

- **방 목록 (Room List)**:
    - **표시 정보**: 방 이름, 방 ID(UUID), 개설자(마스킹된 닉네임), 참여 인원, 생성 시간, 만료 예정 시간.
    - **검색/필터**: 방 이름 또는 방 ID로 검색.
    - **정렬**: 참여자 많은 순, 최근 생성 순 정렬.
- **방 상세 (Room Details)**:
    - **참여자 목록**: 마스킹된 닉네임 + 사용자 식별값(Hash).
    - **메시지 로그**: 해당 방의 대화 내용 전체 조회 (관리자 권한으로 원본 확인).
    - **강제 종료**: 부적절한 방 즉시 폭파 (Force Delete).
    - **공지 발송**: 해당 방에 시스템 메시지 전송.

### 3.3 사용자 관리 (User Management)
서비스 이용자를 모니터링하고 제재하는 기능입니다.

- **사용자 목록 (User List)**:
    - **표시 정보**: 사용자 ID, 닉네임, 플랫폼(iOS/Android), 가입일, 최근 접속일.
    - **검색**: 닉네임 또는 ID로 검색.
- **사용자 상세**:
    - 현재 참여 중인 방 목록.
    - 신고 누적 횟수 및 상태.
- **관리자 조치**:
    - **이용 정지 (Ban)**: 특정 사용자의 서비스 접근 차단.
    - **강제 퇴장 (Kick)**: 현재 소켓 연결 강제 끊기.

### 3.4 모니터링 및 신고 관리 (Chat Monitoring & Moderation)
안전한 서비스 환경을 위한 모니터링 도구입니다.

- **실시간 모니터링**:
    - 서버를 통과하는 모든/특정 메시지를 실시간으로 모니터링 (샘플링 가능).
- **신고 접수 현황**:
    - 사용자가 신고한 메시지/사용자 목록 대기열.
    - 조치 기능: 신고 기각, 메시지 삭제, 사용자 제재.

### 3.5 시스템 상태 및 로그 (System Health & Logs)
개발자를 위한 디버깅 도구입니다.

- **서버 로그**: 서버의 최신 에러/경고 로그 조회 (Tail).
- **소켓 이벤트**: 소켓 연결/해제, 에러 발생 이벤트 타임라인.
- **푸시 알림 로그**: FCM 발송 성공/실패 현황 모니터링.

## 4. 기술 요구사항 (Technical Requirements)

- **프론트엔드**: Single Page Application (React + Vite + TailwindCSS 권장).
- **백엔드**:
    - 관리자 전용 API 경로: `/api/admin/*`.
    - 미들웨어: 관리자 권한 검증 로직 (`adminAuth`).
- **배포**: 기존 Node.js 서버에서 정적 파일 렌더링 방식으로 통합 배포.

## 5. 추후 확장 계획 (Future Scope)
- **통계 고도화**: 과거 데이터 누적 및 기간별 조회 기능.
- **동적 설정(Configuration)**: 서버 재배포 없이 주요 설정(TTL 시간, BLE 임계값 등) 변경 기능.
